---
# VMStation Application Stack Inventory
# Defines the cluster topology for application deployments

all:
  vars:
    # Kubernetes configuration
    kubernetes_version: "1.29"
    pod_network_cidr: "10.244.0.0/16"
    service_network_cidr: "10.96.0.0/12"
    
    # Container runtime
    container_runtime: containerd
    cri_socket: "unix:///var/run/containerd/containerd.sock"
    
    # Cluster endpoint
    control_plane_endpoint: "192.168.4.63:6443"
    
    # SSH configuration
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    
    # Application stack paths
    manifests_path: "{{ playbook_dir }}/../manifests"
    kustomize_path: "{{ playbook_dir }}/../kustomize"
    
  children:
    # Control plane nodes
    control_plane:
      hosts:
        masternode:
          ansible_host: 192.168.4.63
          ansible_user: root
          ansible_connection: local
          node_role: control-plane
          
    # Storage nodes (for media applications)
    storage_nodes:
      hosts:
        storagenodet3500:
          ansible_host: 192.168.4.61
          ansible_user: root
          ansible_ssh_private_key_file: /root/.ssh/id_k3s
          node_role: worker
          node_labels:
            - "vmstation.io/role=storage"
            - "jellyfin.vmstation.io/preferred=true"
      vars:
        # Storage-specific configuration
        schedule_jellyfin: true
        media_storage_path: /srv/media
        jellyfin_config_path: /var/lib/jellyfin
        
    # Compute nodes
    compute_nodes:
      hosts:
        homelab:
          ansible_host: 192.168.4.62
          ansible_user: jashandeepjustinbains
          ansible_ssh_private_key_file: /root/.ssh/id_k3s
          node_role: worker
          node_labels:
            - "vmstation.io/role=compute"
          ansible_become: true
          ansible_become_method: sudo
      vars:
        # Compute-specific configuration
        schedule_general_workloads: true
        
    # All Kubernetes nodes
    k8s_cluster:
      children:
        control_plane:
        storage_nodes:
        compute_nodes:
